!function(){function t(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2;e.register("cpwtJ",(function(n,i){t(n.exports,"ScrollPill",(function(){return f}));var r=e("71mVs"),o=e("agqG7"),s=e("5sJc4"),l=e("1loHG"),a=e("417lm"),c=null;function u(){if("onscrollend"in window)return"scrollend";c||(c=new CustomEvent("scrollend"));var t=null;return window.addEventListener("scroll",(function(){clearTimeout(t),t=setTimeout((function(){window.dispatchEvent(c)}),100)})),c}u(),window.addEventListener("scrollend",(function(){}));var d=function(){"use strict";function t(e,n){(0,r.default)(this,t),this.scrollpill=n,this.element=e,this.is_open=!0,this.sections=(0,a.default)(this.element.querySelectorAll("a")).map((function(t){return[t,document.getElementById(t.getAttribute("href").substring(1))]})).filter((function(t){var e=(0,l.default)(t,2);e[0];return null!=e[1]})),this.activeSection=null,this.registerEvents(),this.disabled=!1}return(0,o.default)(t,[{key:"registerEvents",value:function(){var t=this;this.sections.forEach((function(e){var n=(0,l.default)(e,2),i=n[0],r=(n[1],t);i.addEventListener("click",(function(t){var e=r;r.disable(),u(),window.addEventListener("scrollend",(function(){e.enable()}),{once:!0})}))}))}},{key:"updateActiveSection",value:function(){var t;null!=(t=this.scrollpill.state==this.scrollpill.state_machine.AT_BOTTOM?this.sections[this.sections.length-1]:this.sections.findLast((function(t){var e=(0,l.default)(t,2);e[0];return e[1].getBoundingClientRect().top<window.innerHeight/2})))?(null!=this.activeSection&&this.activeSection[0].classList.remove("scrollpill-navbar-active-section"),t[0].classList.add("scrollpill-navbar-active-section")):null!=this.activeSection&&this.activeSection[0].classList.remove("scrollpill-navbar-active-section"),this.activeSection=t}},{key:"show",value:function(){this.is_open||(this.is_open=!0)}},{key:"hide",value:function(){this.is_open&&(this.is_open=!1)}},{key:"forceHide",value:function(){this.is_open&&(this.is_open=!1)}},{key:"toggle",value:function(){this.is_open?this.hide():this.show()}},{key:"disable",value:function(){this.disabled||(this.oldShow=this.show,this.oldHide=this.hide,this.show=function(){},this.hide=function(){},this.disabled=!0)}},{key:"enable",value:function(){this.disabled=!1,this.show=this.oldShow,this.hide=this.oldHide}}]),t}(),h=function(){"use strict";function t(e){(0,r.default)(this,t),(0,s.default)(this,"state_machine",{AT_TOP_FIRST:"scrollpill-at-top-first",AT_TOP:"scrollpill-at-top",AT_MIDDLE:"scrollpill-at-middle",AT_BOTTOM:"scrollpill-at-bottom"}),this.element=e,this.element_height=e.getBoundingClientRect().height,this.navbar=new d(e.querySelector(".scrollpill-navbar"),this),e.appendChild(this.navbar.element),e.classList.add("scrollpill"),e.classList.add("scrollpill-at-top-first"),this.state=this.state_machine.AT_TOP_FIRST,this.scrollPercentage=0,this.registerEventHandlers(),this.navbar.show()}return(0,o.default)(t,[{key:"registerEventHandlers",value:function(){window.addEventListener("scroll",this.onScrollUpdate.bind(this)),window.addEventListener("resize",this.onScrollUpdate.bind(this)),window.addEventListener("orientationchange",this.onScrollUpdate.bind(this)),this.element.addEventListener("click",this.onClick.bind(this)),window.addEventListener("scroll",this.navbar.updateActiveSection.bind(this.navbar))}},{key:"updateState",value:function(t){this.element.classList.remove(this.state),this.element.classList.add(t),this.state=t,this.element.offsetHeight}},{key:"percentage2screenpx",value:function(t){return t/100*(window.innerHeight-1.775*this.element_height)+"px"}},{key:"percentage2windowpx",value:function(t){return t/100*(document.body.scrollHeight-window.innerHeight)}},{key:"onScrollUpdate",value:function(t){var e=window.scrollY/(document.body.scrollHeight-window.innerHeight)*100;this.scrollPercentage=e,this.element.style.top=this.percentage2screenpx(e),0==e?(this.updateState(this.state_machine.AT_TOP),this.navbar.show()):e>=99.75?(this.updateState(this.state_machine.AT_BOTTOM),this.navbar.forceHide(),console.log("force hide")):(this.updateState(this.state_machine.AT_MIDDLE),this.navbar.hide())}},{key:"onPercentageUpdate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.scrollBehavior,i=void 0===n?"instant":n;window.scrollTo({right:0,top:this.percentage2windowpx(t),behavior:i}),this.onScrollUpdate()}},{key:"onClick",value:function(t){if(!this.navbar.element.contains(t.target)){if(this.state==this.state_machine.AT_BOTTOM){var e=this;return this.navbar.disable(),this.onPercentageUpdate(0,{scrollBehavior:"smooth"}),u(),void window.addEventListener("scrollend",(function(){e.navbar.enable(),e.navbar.show()}),{once:!0})}this.navbar.is_open?(this.element.blur(),this.navbar.hide()):(this.element.focus(),this.navbar.show())}}}]),t}(),f=function t(e,n){"use strict";(0,r.default)(this,t);var i=document.getElementById(e);this.element=new h(i),this.options=null!=n?n:{}}})),e.register("71mVs",(function(e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(e.exports,"default",(function(){return i}))})),e.register("agqG7",(function(e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}t(e.exports,"default",(function(){return r}))})),e.register("5sJc4",(function(e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t(e.exports,"default",(function(){return i}))})),e.register("1loHG",(function(n,i){t(n.exports,"default",(function(){return a}));var r=e("3HoQk"),o=e("eKljp"),s=e("6rK5B"),l=e("azCIo");function a(t,e){return(0,r.default)(t)||(0,o.default)(t,e)||(0,l.default)(t,e)||(0,s.default)()}})),e.register("3HoQk",(function(e,n){function i(t){if(Array.isArray(t))return t}t(e.exports,"default",(function(){return i}))})),e.register("eKljp",(function(e,n){function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}t(e.exports,"default",(function(){return i}))})),e.register("6rK5B",(function(e,n){function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t(e.exports,"default",(function(){return i}))})),e.register("azCIo",(function(n,i){t(n.exports,"default",(function(){return o}));var r=e("dFh46");function o(t,e){if(t){if("string"==typeof t)return(0,r.default)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.default)(t,e):void 0}}})),e.register("dFh46",(function(e,n){function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}t(e.exports,"default",(function(){return i}))})),e.register("417lm",(function(n,i){t(n.exports,"default",(function(){return a}));var r=e("aZoqk"),o=e("eKljp"),s=e("8ESDE"),l=e("azCIo");function a(t){return(0,r.default)(t)||(0,o.default)(t)||(0,l.default)(t)||(0,s.default)()}})),e.register("aZoqk",(function(n,i){t(n.exports,"default",(function(){return o}));var r=e("dFh46");function o(t){if(Array.isArray(t))return(0,r.default)(t)}})),e.register("8ESDE",(function(e,n){function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t(e.exports,"default",(function(){return i}))}))}();
//# sourceMappingURL=scrollpill.695f5aba.js.map

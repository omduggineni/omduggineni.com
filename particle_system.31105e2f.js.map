{"mappings":"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","sources":["src/assets/js/particle_system.js"],"sourcesContent":["const pix2browserstr = (pix) => {\n    return pix + 'px';\n}\n\nclass ValueNoiseGenerator{\n    constructor(max_value, max_steps){\n        this.value = Math.random() * max_value;\n        this.next_value = Math.random() * max_value;\n        this.next_value_steps = Math.floor((Math.sqrt(Math.random()) * (max_steps-1)) + 1);\n        this.max_value = max_value;\n        this.max_steps = max_steps;\n        this.step_num = 0;\n    }\n    ease(a, b, t){\n        return a + (b - a) * t; //linear interp for now\n    }\n    getValue(){\n        let value = this.ease(this.value, this.next_value, this.step_num / this.next_value_steps);\n        //console.log(this.value, this.next_value, this.step_num, this.next_value_steps, value);\n        this.step_num++;\n        if(this.step_num == this.next_value_steps){\n            this.step_num = 0;\n            this.value = this.next_value;\n            this.next_value = Math.random() * this.max_value;\n            this.next_value_steps = Math.floor((Math.sqrt(Math.random()) * (this.max_steps-1)) + 1);\n        }\n        return value;\n    }\n}\n\n// var particleTextRemoveList = [];\n// var particleTextRemoveTimeout = null;\n// const particleTextRemove = ()=>{\n//     for(let i = 0; i < particleTextRemoveList.length; i++){\n//         particleTextRemoveList[i].remove();\n//     }\n//     particleTextRemoveList = [];\n// }\nconst particleSay = (text, parentElement, x, y, lifetime) => {\n    let element = document.createElement('span');\n    element.innerHTML = text;\n    element.classList.add('particle-system-text');\n    parentElement.appendChild(element);\n    element.style.top = y + 'px';\n    element.style.left = x + 'px';\n    element.style.animationDuration = lifetime/1000 + 's';\n    setTimeout(()=>{\n        element.remove();\n        \n        //element.style.animation = '';\n        //element.style.display = 'none';\n        //particleTextRemoveList.push(element);\n        //clearTimeout(particleTextRemoveTimeout);\n        //particleTextRemoveTimeout = setTimeout(particleTextRemove, 100);\n    }, lifetime);\n}\n\nconst rick_utterances = [[\"We're\", 0.3800000000000001], ['no', 0.2699999999999998], ['strangers', 0.24], ['to', 0.29000000000000004], ['love', 2.83], ['You', 0.33000000000000007], ['know', 0.22999999999999954], ['the', 0.25], ['rules', 0.6900000000000004], ['and', 0.3600000000000003], ['so', 0.40999999999999925], ['do', 0.3600000000000003], ['I', 1.63], ['A', 0.2900000000000009], ['full', 0.21999999999999886], [\"commitment's\", 0.7699999999999996], ['what', 0.25], [\"I'm\", 0.5400000000000009], ['thinking', 0.3200000000000003], ['of', 1.8100000000000005], ['you', 0.3299999999999983], [\"wouldn't\", 0.4800000000000004], ['get', 0.2599999999999998], ['this', 0.25], ['from', 0.46000000000000085], ['any', 0.40000000000000036], ['other', 0.21999999999999886], ['guy', 0.26000000000000156], ['I', 0.25], ['how', 0.9599999999999973], [\"I'm\", 1.3000000000000007], ['feeling', 0.3500000000000014], ['gotta', 0.259999999999998], ['make', 0.25], ['you', 0.2900000000000027], ['understand', 0.7899999999999991], ['never', 0.41999999999999815], ['gonna', 1.620000000000001], ['give', 0.39000000000000057], ['you', 0.23999999999999844], ['up', 0.2700000000000031], ['never', 0.4299999999999997], ['gonna', 0.34999999999999787], ['let', 0.2699999999999996], ['you', 0.6900000000000013], ['down', 0.23999999999999844], ['never', 0.18000000000000327], ['gonna', 0.2699999999999996], ['run', 0.2699999999999996], ['around', 0.4299999999999997], ['and', 0.7399999999999984], ['desert', 0.23000000000000043], ['you', 0.16000000000000014], ['never', 0.3200000000000003], ['hi', 0.25], ['hi', 0.35999999999999943], ['hi', 0.6900000000000013], ['hi', 0.259999999999998], ['hi', 0.15000000000000213], ['hi', 0.16000000000000014], ['hi', 0.17999999999999972], ['hi', 0.35999999999999943], ['hi', 0.3500000000000014], ['hi', 0.48999999999999844], ['hi', 0.5000000000000036], ['hi', 0.3399999999999963], ['hi', 0.39000000000000057], ['hi', 1.1400000000000006], ['hi', 0.240000000000002], ['hi', 0.17999999999999972], ['hi', 0.28999999999999915], ['hi', 0.28999999999999915], ['hi', 0.36999999999999744], ['hi', 0.7899999999999991], ['hi', 0.2600000000000051], ['hi', 0.14999999999999858], ['hi', 0.269999999999996], ['hi', 0.37000000000000455], ['hi', 0.3200000000000003], ['hi', 0.7299999999999969], ['hi', 0.21000000000000085], ['hi', 0.14000000000000057], ['hi', 0.0799999999999983], ['hi', 0.20000000000000284], ['hi', 0.4200000000000017], ['hi', 0.29999999999999716], ['hi', 0.6099999999999994], ['hi', 0.4200000000000017], ['hi', 0.3399999999999963], ['hi', 0.4299999999999997], ['hi', 1.0]]\n\n\nclass ParticleUtterancesObject{\n    constructor(particle, utterances){\n        this.particle = particle;\n        this.utterances = utterances;\n        this.utterance_index = 0;\n    }\n    make_utterance(){\n        let utterance = this.utterances[this.utterance_index];\n        particleSay(utterance[0], this.particle._parentSystem.element, this.particle._x, this.particle._y, utterance[1]*1000);\n        this.utterance_index++;\n        //console.log(this.utterance_index);\n        return this.utterance_index < this.utterances.length;\n    }\n    speak(){\n        if(this.make_utterance()) setTimeout(this.speak.bind(this), this.utterances[this.utterance_index-1][1]*1000);\n    }\n}\n\nclass Particle{\n    constructor(parentElement, parentSystem){\n        this._speed = Particle.SPEED;\n        this._parentSystem = parentSystem;\n        this._x = Math.random() * this._parentSystem.width;\n        this._y = Math.random() * this._parentSystem.height;\n        this._z_generator = new ValueNoiseGenerator(10, 100);\n        this._z = this._z_generator.getValue()+10;\n        //this.brightness = new ValueNoiseGenerator(1, 100);\n\n        this._theta_generator = new ValueNoiseGenerator(Math.PI * 2, 500);\n        //console.log(this._theta_generator.getValue());\n        this._theta = this._theta_generator.getValue();//Math.random() * Math.PI * 2;\n        this.element = document.createElement('div');\n        this.element.classList.add('particle-system-particle');\n        this.element.style.left = this._x + 'px'; //TODO: potentially make string generation more efficient\n        this.element.style.top = this._y + 'px';\n        parentElement.appendChild(this.element);\n    }\n    update(){\n        //particle calculation logic\n        this._x = (this._x + (Math.cos(this._theta) * this._speed) + this._parentSystem.width) % this._parentSystem.width;\n        this._y = (this._y + (Math.sin(this._theta) * this._speed) + this._parentSystem.height) % this._parentSystem.height;\n        this._theta = this._theta_generator.getValue();//Math.random() * 0.2 - 0.1;\n        //console.log(this._theta);\n        this._speed += (Math.random() - Math.random()) * 0.1;\n        this._speed = Particle.SPEED + (this._speed-Particle.SPEED) * (this.SPEED > Particle.SPEED ? 0.998 : 0.95);\n        this._z = this._z_generator.getValue()+10;\n\n        if(Math.random() > 0.999) particleSay(\"Hello!\", this._parentSystem.element, this._x, this._y, 1000);\n\n        //actual UI update\n        this.element.style.left = this._x + 'px';\n        this.element.style.top = this._y + 'px';\n        this.element.style.width = this._z + 'px';\n        this.element.style.height = this._z + 'px';\n        this.element.style.opacity = Math.min(2/(this._z), 1);\n    }\n    sayUtterances(utterances){\n        let utterances_obj = new ParticleUtterancesObject(this, utterances);\n        utterances_obj.speak();\n    }\n}\nParticle.SPEED = 1;\nParticle.WIDTH=15;\nclass ParticleSystem{\n    constructor(parentElement, numParticles){\n        this._ticknum = 0;\n\n        this.width = window.innerWidth-Particle.WIDTH;\n        this.height = document.body.scrollHeight-Particle.WIDTH;\n\n        parentElement.style.height = this.height + 'px';\n\n        this.element = parentElement;\n\n        this.particles = [];\n        for(let i = 0; i < numParticles; i++){\n            setTimeout(()=>{\n                this.particles.push(new Particle(this.element, this));\n            }, i);\n        }\n        this.update_this = this.update.bind(this);\n        requestAnimationFrame(this.update_this); //TODO: lag/framerate compensation\n        window.addEventListener('resize', this.on_resize.bind(this));\n    }\n    on_resize(){\n        this.width = window.innerWidth;\n        this.height = document.body.scrollHeight;\n        this.element.style.height = this.height + 'px';\n    }\n    update(){\n        for(let i = 0; i < this.particles.length; i++){\n            this.particles[i].update();\n        }\n        this._ticknum++;\n        requestAnimationFrame(this.update_this);\n    }\n}\n\nexport {ParticleSystem, Particle, rick_utterances};"],"names":["$771c11bc1d5db1d7$var$ValueNoiseGenerator","ease","a","b","t","getValue","value","this","next_value","step_num","next_value_steps","Math","random","max_value","floor","sqrt","max_steps","constructor","$771c11bc1d5db1d7$var$particleSay","text","parentElement","x","y","lifetime","element","document","createElement","innerHTML","classList","add","appendChild","style","top","left","animationDuration","setTimeout","remove","$771c11bc1d5db1d7$export$90a2d33280540662","$771c11bc1d5db1d7$var$ParticleUtterancesObject","make_utterance","utterance","utterances","utterance_index","particle","_parentSystem","_x","_y","length","speak","bind","$771c11bc1d5db1d7$export$c36c68baa13912a5","update","cos","_theta","_speed","width","sin","height","_theta_generator","SPEED","_z","_z_generator","opacity","min","sayUtterances","parentSystem","PI","WIDTH","$771c11bc1d5db1d7$export$f219b6a0e4bb0b6d","on_resize","window","innerWidth","body","scrollHeight","i","particles","_ticknum","requestAnimationFrame","update_this","numParticles","push","addEventListener"],"version":3,"file":"particle_system.31105e2f.js.map"}
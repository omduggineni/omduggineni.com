{"mappings":"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","sources":["src/assets/js/scrollpill.js","node_modules/@swc/helpers/src/_class_call_check.mjs","node_modules/@swc/helpers/src/_create_class.mjs","node_modules/@swc/helpers/src/_define_property.mjs"],"sourcesContent":["class ScrollPillNavbar {\n    constructor(element) {\n        this.element = element;\n        element.style.display = 'block';\n        this.is_open = true;\n    }\n    show() {\n        if(this.is_open) return;\n        this.element.style.display = 'block';\n        this.is_open = true;\n    }\n    hide() {\n        if(!this.is_open) return;\n        this.element.style.display = 'none';\n        this.is_open = false;\n    }\n    toggle() {\n        if(this.is_open) this.hide();\n        else this.show();\n    }\n    disable() {\n        this.oldShow = this.show;\n        this.oldHide = this.hide;\n        this.show = () => { };\n        this.hide = () => { };\n    }\n    enable() {\n        this.show = this.oldShow;\n        this.hide = this.oldHide;\n    }\n}\n\nclass ScrollPillElement {\n    state_machine = {\n        AT_TOP_FIRST: 'scrollpill-at-top-first',\n        AT_TOP: 'scrollpill-at-top',\n        AT_MIDDLE: 'scrollpill-at-middle',\n        AT_BOTTOM: 'scrollpill-at-bottom',\n    };\n    drag_states = {\n        DRAGGING: 'scrollpill-dragging',\n    };\n    constructor(element) {\n        this.element = element;\n        this.element_height = element.getBoundingClientRect().height;\n        this.navbar = new ScrollPillNavbar(element.querySelector('.scrollpill-navbar'));\n        element.appendChild(this.navbar.element);\n        element.classList.add('scrollpill');\n        element.classList.add('scrollpill-at-top-first');\n        this.state = this.state_machine.AT_TOP_FIRST;\n        this.scrollPercentage = 0;\n\n        this.registerEventHandlers();\n    }\n    registerEventHandlers() {\n        window.addEventListener('scroll', this.onScrollUpdate.bind(this));\n        window.addEventListener('resize', this.onScrollUpdate.bind(this));\n        this.element.addEventListener('click', this.onClick.bind(this));\n    }\n    updateState(state) {\n        this.element.classList.remove(this.state);\n        this.element.classList.add(state);\n        this.state = state;\n    }\n    percentage2screenpx(percentage) {\n        //console.log(percentage);\n        let remaining_screen_space = window.innerHeight - this.element_height * 1.775;\n        \n        return ((percentage/100) * remaining_screen_space) + 'px';\n    }\n    percentage2windowpx(percentage) {\n        return (percentage / 100) * (document.body.scrollHeight - window.innerHeight);\n    }\n    onScrollUpdate(event) {\n        const scrollY = window.scrollY;\n        const scrollHeight = document.body.scrollHeight;\n        const windowHeight = window.innerHeight;\n\n        const scrollPercentage = (scrollY / (scrollHeight - windowHeight)) * 100;\n        \n        if (this.element.classList.contains('scrollpill-open')) {\n            this.element.classList.remove('scrollpill-open');\n        }\n\n        this.scrollPercentage = scrollPercentage;\n        this.element.style.top = this.percentage2screenpx(scrollPercentage);\n        if(scrollPercentage == 0){\n            this.updateState(this.state_machine.AT_TOP);\n            this.navbar.show();\n        } else if (scrollPercentage >= 99.75) {\n            this.updateState(this.state_machine.AT_BOTTOM);\n            this.navbar.hide();\n        } else {\n            this.updateState(this.state_machine.AT_MIDDLE);\n            this.navbar.hide();\n        }\n    }\n    onPercentageUpdate(percentage, {scrollBehavior = 'instant'} = {}) {\n        // scroll the window to the correct position\n        window.scrollTo({\n            right: 0, top: this.percentage2windowpx(percentage), behavior: scrollBehavior\n        });\n        this.onScrollUpdate();\n    }\n    onClick() {\n        if (this.state == this.state_machine.AT_BOTTOM) {\n            this.navbar.disable();\n            this.onPercentageUpdate(0, { scrollBehavior: 'smooth' });\n            let scrollHandler = () => {\n                if (this.scrollPercentage == 0) {\n                    window.removeEventListener('scroll', scrollHandler);\n                    this.navbar.enable();\n                    this.navbar.show();\n                }\n            };\n            window.addEventListener('scroll', scrollHandler);\n            setTimeout(() => {\n                window.removeEventListener('scroll', scrollHandler);\n                this.navbar.enable();\n                this.navbar.show();\n            }, 2000);\n        }\n\n        if (this.navbar.is_open) {\n            this.element.classList.remove(\"scrollpill-open\");\n            this.navbar.hide();\n        } else {\n            this.element.classList.add(\"scrollpill-open\");\n            this.navbar.show();\n        }\n    }\n}\n\nclass ScrollPill{\n    constructor(element_id, options) {\n        let element = document.getElementById(element_id);\n        this.element = new ScrollPillElement(element);\n        this.options = options ?? {};\n    }\n}\n\nexport {ScrollPill};","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n"],"names":["$71mVs","parcelRequire","$9091036bd6d62074$var$ScrollPillNavbar","ScrollPillNavbar","element","this","style","display","is_open","key","hide","show","oldShow","oldHide","$9091036bd6d62074$var$ScrollPillElement","ScrollPillElement","$5sJc4","default","AT_TOP_FIRST","AT_TOP","AT_MIDDLE","AT_BOTTOM","DRAGGING","element_height","getBoundingClientRect","height","navbar","querySelector","appendChild","classList","add","state","state_machine","scrollPercentage","registerEventHandlers","window","addEventListener","onScrollUpdate","bind","onClick","remove","percentage","innerHeight","document","body","scrollHeight","event","scrollY","contains","top","percentage2screenpx","updateState","ref","arguments","length","_scrollBehavior","scrollBehavior","scrollTo","right","percentage2windowpx","behavior","disable","onPercentageUpdate","scrollHandler","_this","removeEventListener","enable","setTimeout","$9091036bd6d62074$export$180a60dd364660b1","ScrollPill","element_id","options","getElementById","$7a6698bbb9b6cf57$export$2e2bcd8739ae039","instance","Constructor","TypeError","$345e8126ea21d802$var$_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","$345e8126ea21d802$export$2e2bcd8739ae039","protoProps","staticProps","prototype","$e5728adbf1ac5b75$export$2e2bcd8739ae039","obj","value"],"version":3,"file":"scrollpill.16891650.js.map"}
!function(){function e(e,t,i,s){Object.defineProperty(e,t,{get:i,set:s,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2,i=t.register;i("cpwtJ",function(i,s){e(i.exports,"ScrollPill",function(){return h});var n=t("2oEMT");let l=null;function o(){if("onscrollend"in window)return"scrollend";l||(l=new CustomEvent("scrollend"));let e=null;return window.addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(()=>{window.dispatchEvent(l)},100)}),l}o(),window.addEventListener("scrollend",()=>{});class a{registerEvents(){this.sections.forEach(([e,t])=>{e.addEventListener("click",e=>{this.disable(),o(),window.addEventListener("scrollend",()=>{this.enable()},{once:!0})})})}updateActiveSection(){let e;null!=(e=this.scrollpill.state==this.scrollpill.state_machine.AT_BOTTOM?this.sections[this.sections.length-1]:this.sections.findLast(([e,t])=>t.getBoundingClientRect().top<window.innerHeight/2))?(null!=this.activeSection&&this.activeSection[0].classList.remove("scrollpill-navbar-active-section"),e[0].classList.add("scrollpill-navbar-active-section")):null!=this.activeSection&&this.activeSection[0].classList.remove("scrollpill-navbar-active-section"),this.activeSection=e}show(){this.is_open||(this.scrollpill.element.classList.add("scrollpill-open"),this.is_open=!0)}hide(){this.is_open&&(this.scrollpill.element.classList.remove("scrollpill-open"),this.is_open=!1)}forceHide(){this.is_open&&(this.scrollpill.element.classList.remove("scrollpill-open"),this.is_open=!1)}toggle(){this.is_open?this.hide():this.show()}disable(){this.disabled||(this.oldShow=this.show,this.oldHide=this.hide,this.show=()=>{},this.hide=()=>{},this.disabled=!0)}enable(){this.disabled=!1,this.show=this.oldShow,this.hide=this.oldHide}constructor(e,t){this.scrollpill=t,t.element.classList.add("scrollpill-open"),this.element=e,this.is_open=!0,this.sections=[...this.element.querySelectorAll("a")].map(e=>[e,document.getElementById(e.getAttribute("href").substring(1))]).filter(([e,t])=>null!=t),this.activeSection=null,this.registerEvents(),this.disabled=!1}}class r{registerEventHandlers(){window.addEventListener("scroll",this.onScrollUpdate.bind(this)),window.addEventListener("resize",this.onScrollUpdate.bind(this)),window.addEventListener("orientationchange",this.onScrollUpdate.bind(this)),this.element.addEventListener("click",this.onClick.bind(this)),window.addEventListener("scroll",this.navbar.updateActiveSection.bind(this.navbar))}updateState(e){this.element.classList.remove(this.state),this.element.classList.add(e),this.state=e,this.element.offsetHeight}percentage2screenpx(e){return e/100*(window.innerHeight-1.775*this.element_height)+"px"}percentage2windowpx(e){return e/100*(document.body.scrollHeight-window.innerHeight)}onScrollUpdate(e){let t=window.scrollY,i=t/(document.body.scrollHeight-window.innerHeight)*100;this.scrollPercentage=i,this.element.style.top=this.percentage2screenpx(i),0==i?(this.updateState(this.state_machine.AT_TOP),this.navbar.show()):i>=99.75?(this.updateState(this.state_machine.AT_BOTTOM),this.navbar.forceHide()):(this.updateState(this.state_machine.AT_MIDDLE),this.navbar.hide())}onPercentageUpdate(e,{scrollBehavior:t="instant"}={}){window.scrollTo({right:0,top:this.percentage2windowpx(e),behavior:t}),this.onScrollUpdate()}onClick(e){if(!this.navbar.element.contains(e.target)){if(this.state==this.state_machine.AT_BOTTOM){this.navbar.disable(),this.onPercentageUpdate(0,{scrollBehavior:"smooth"}),o(),window.addEventListener("scrollend",()=>{this.navbar.enable(),this.navbar.show()},{once:!0});return}this.navbar.is_open?(this.element.blur(),this.navbar.hide()):(this.element.focus(),this.navbar.show())}}constructor(e){(0,n._)(this,"state_machine",{AT_TOP_FIRST:"scrollpill-at-top-first",AT_TOP:"scrollpill-at-top",AT_MIDDLE:"scrollpill-at-middle",AT_BOTTOM:"scrollpill-at-bottom"}),this.element=e,this.element_height=e.getBoundingClientRect().height,this.navbar=new a(e.querySelector(".scrollpill-navbar"),this),e.appendChild(this.navbar.element),e.classList.add("scrollpill"),e.classList.add("scrollpill-at-top-first"),this.state=this.state_machine.AT_TOP_FIRST,this.scrollPercentage=0,this.registerEventHandlers(),this.navbar.show()}}class h{constructor(e,t){let i=document.getElementById(e);this.element=new r(i),this.options=null!=t?t:{}}}}),i("2oEMT",function(t,i){e(t.exports,"_",function(){return s});function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}})}();
//# sourceMappingURL=scrollpill.e891c94b.js.map

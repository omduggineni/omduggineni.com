!function(){function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2;t.register("cpwtJ",(function(n,i){e(n.exports,"ScrollPill",(function(){return d}));var l=t("71mVs"),s=t("agqG7"),r=t("5sJc4"),o=t("1loHG"),a=t("417lm"),c=function(){"use strict";function e(t,n){(0,l.default)(this,e),this.scrollpill=n,n.element.classList.add("scrollpill-open"),this.element=t,t.style.display="block",this.is_open=!0,this.sections=(0,a.default)(this.element.querySelectorAll("a")).map((function(e){return[e,document.getElementById(e.getAttribute("href").substring(1))]})),this.activeSection=null,this.registerEvents(),this.disabled=!1}return(0,s.default)(e,[{key:"registerEvents",value:function(){var e=this,t=null,n=function(){var i=e;clearTimeout(t),t=setTimeout((function(){window.removeEventListener("scroll",n),i.enable(),i.scrollpill.state==i.scrollpill.state_machine.AT_BOTTOM&&i.hide()}),500)};this.sections.forEach((function(i){var l=(0,o.default)(i,2),s=l[0],r=(l[1],e);s.addEventListener("click",(function(e){var i=r;r.disable(),r.scrollpill.closeOnScroll=!1,window.addEventListener("scroll",n),clearTimeout(t),t=setTimeout((function(){window.removeEventListener("scroll",n),i.enable(),i.scrollpill.state==i.scrollpill.state_machine.AT_BOTTOM&&i.hide()}),500)}))}))}},{key:"updateActiveSection",value:function(){var e;null!=(e=this.scrollpill.state==this.scrollpill.state_machine.AT_BOTTOM?this.sections[this.sections.length-1]:this.sections.findLast((function(e){var t=(0,o.default)(e,2);t[0];return t[1].getBoundingClientRect().top<window.innerHeight/2})))?(null!=this.activeSection&&this.activeSection[0].classList.remove("scrollpill-navbar-active-section"),e[0].classList.add("scrollpill-navbar-active-section")):null!=this.activeSection&&this.activeSection[0].classList.remove("scrollpill-navbar-active-section"),this.activeSection=e}},{key:"show",value:function(){this.is_open||(this.element.style.display="block",this.scrollpill.element.classList.add("scrollpill-open"),this.is_open=!0)}},{key:"hide",value:function(){this.is_open&&(this.element.style.display="none",this.scrollpill.element.classList.remove("scrollpill-open"),this.is_open=!1)}},{key:"forceHide",value:function(){this.is_open&&(this.element.style.display="none",this.scrollpill.element.classList.remove("scrollpill-open"),this.is_open=!1)}},{key:"toggle",value:function(){this.is_open?this.hide():this.show()}},{key:"disable",value:function(){this.disabled||(this.oldShow=this.show,this.oldHide=this.hide,this.show=function(){},this.hide=function(){},this.disabled=!0)}},{key:"enable",value:function(){this.disabled=!1,this.show=this.oldShow,this.hide=this.oldHide}}]),e}(),u=function(){"use strict";function e(t){(0,l.default)(this,e),(0,r.default)(this,"state_machine",{AT_TOP_FIRST:"scrollpill-at-top-first",AT_TOP:"scrollpill-at-top",AT_MIDDLE:"scrollpill-at-middle",AT_BOTTOM:"scrollpill-at-bottom"}),(0,r.default)(this,"drag_states",{DRAGGING:"scrollpill-dragging"}),this.element=t,this.element_height=t.getBoundingClientRect().height,this.navbar=new c(t.querySelector(".scrollpill-navbar"),this),t.appendChild(this.navbar.element),t.classList.add("scrollpill"),t.classList.add("scrollpill-at-top-first"),this.state=this.state_machine.AT_TOP_FIRST,this.scrollPercentage=0,this.registerEventHandlers()}return(0,s.default)(e,[{key:"registerEventHandlers",value:function(){window.addEventListener("scroll",this.onScrollUpdate.bind(this)),window.addEventListener("resize",this.onScrollUpdate.bind(this)),this.element.addEventListener("click",this.onClick.bind(this)),window.addEventListener("scroll",this.navbar.updateActiveSection.bind(this.navbar))}},{key:"updateState",value:function(e){this.element.classList.remove(this.state),this.element.classList.add(e),this.state=e}},{key:"percentage2screenpx",value:function(e){return e/100*(window.innerHeight-1.775*this.element_height)+"px"}},{key:"percentage2windowpx",value:function(e){return e/100*(document.body.scrollHeight-window.innerHeight)}},{key:"onScrollUpdate",value:function(e){var t=window.scrollY/(document.body.scrollHeight-window.innerHeight)*100;this.scrollPercentage=t,this.element.style.top=this.percentage2screenpx(t),0==t?(this.updateState(this.state_machine.AT_TOP),this.navbar.show()):t>=99.75?(this.updateState(this.state_machine.AT_BOTTOM),this.navbar.forceHide()):(this.updateState(this.state_machine.AT_MIDDLE),this.navbar.hide())}},{key:"onPercentageUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.scrollBehavior,i=void 0===n?"instant":n;window.scrollTo({right:0,top:this.percentage2windowpx(e),behavior:i}),this.onScrollUpdate()}},{key:"onClick",value:function(e){if(this.state==this.state_machine.AT_BOTTOM){var t=this;if(e.target.classList.contains(".scrollpill-navbar"))return;this.navbar.disable(),this.onPercentageUpdate(0,{scrollBehavior:"smooth"});var n=function(){0==t.scrollPercentage&&(window.removeEventListener("scroll",n),t.navbar.enable(),t.navbar.show())};window.addEventListener("scroll",n),setTimeout((function(){window.removeEventListener("scroll",n),t.navbar.enable(),t.navbar.show()}),2e3)}else if(this.state==this.state_machine.AT_TOP||this.state==this.state_machine.AT_TOP_FIRST)return;this.navbar.is_open?this.navbar.hide():this.navbar.show()}}]),e}(),d=function e(t,n){"use strict";(0,l.default)(this,e);var i=document.getElementById(t);this.element=new u(i),this.options=null!=n?n:{}}})),t.register("71mVs",(function(t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e(t.exports,"default",(function(){return i}))})),t.register("agqG7",(function(t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}e(t.exports,"default",(function(){return l}))})),t.register("5sJc4",(function(t,n){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e(t.exports,"default",(function(){return i}))})),t.register("1loHG",(function(n,i){e(n.exports,"default",(function(){return a}));var l=t("3HoQk"),s=t("eKljp"),r=t("6rK5B"),o=t("azCIo");function a(e,t){return(0,l.default)(e)||(0,s.default)(e,t)||(0,o.default)(e,t)||(0,r.default)()}})),t.register("3HoQk",(function(t,n){function i(e){if(Array.isArray(e))return e}e(t.exports,"default",(function(){return i}))})),t.register("eKljp",(function(t,n){function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e(t.exports,"default",(function(){return i}))})),t.register("6rK5B",(function(t,n){function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e(t.exports,"default",(function(){return i}))})),t.register("azCIo",(function(n,i){e(n.exports,"default",(function(){return s}));var l=t("dFh46");function s(e,t){if(e){if("string"==typeof e)return(0,l.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,l.default)(e,t):void 0}}})),t.register("dFh46",(function(t,n){function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}e(t.exports,"default",(function(){return i}))})),t.register("417lm",(function(n,i){e(n.exports,"default",(function(){return a}));var l=t("aZoqk"),s=t("eKljp"),r=t("8ESDE"),o=t("azCIo");function a(e){return(0,l.default)(e)||(0,s.default)(e)||(0,o.default)(e)||(0,r.default)()}})),t.register("aZoqk",(function(n,i){e(n.exports,"default",(function(){return s}));var l=t("dFh46");function s(e){if(Array.isArray(e))return(0,l.default)(e)}})),t.register("8ESDE",(function(t,n){function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e(t.exports,"default",(function(){return i}))}))}();
//# sourceMappingURL=scrollpill.3ad6c1b1.js.map
